(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["2d0e8be2"],{"8b24":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-layout",{attrs:{view:"lHh Lpr lFf"}},[s("q-header",{attrs:{elevated:""}},[s("q-toolbar",[s("q-btn",{attrs:{flat:"",dense:"",round:"",icon:"menu"},on:{click:function(t){e.leftDrawerOpen=!e.leftDrawerOpen}}}),s("q-toolbar-title",[e._v(e._s(e.title))]),s("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"business"},on:{click:function(t){e.dlgBuilding.show=!0}}}),s("q-btn",{directives:[{name:"show",rawName:"v-show",value:e.building.address.length>0,expression:"building.address.length > 0"}],attrs:{flat:"",round:"",dense:"",icon:"cast_connected"},on:{click:e.onConnect}})],1)],1),s("q-drawer",{ref:"drawer",attrs:{"show-if-above":"",bordered:"","content-class":"bg-grey-2"},model:{value:e.leftDrawerOpen,callback:function(t){e.leftDrawerOpen=t},expression:"leftDrawerOpen"}},[s("q-scroll-area",{staticClass:"fit"},[s("div",[s("c-site-command",{directives:[{name:"show",rawName:"v-show",value:e.session.sitePK.length>0,expression:"session.sitePK.length > 0"}],attrs:{sessionPK:e.session.sitePK,sessionId:e.session.id},on:{"before-click":e.onBeforeClick}}),s("c-panel-command",{directives:[{name:"show",rawName:"v-show",value:e.session.panelPK.length>0,expression:"session.panelPK.length > 0"}],attrs:{sessionPK:e.session.panelPK,sessionId:e.session.id,unitId:e.session.unitId},on:{"before-click":e.onBeforeClick}}),s("q-list",[s("q-item-label",{attrs:{header:""}},[e._v("Clear Screen")]),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.onClearScreen}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"school"}})],1),s("q-item-section",[s("q-item-label",[e._v("Clear Screen")])],1)],1)],1),s("q-list",[s("q-item-label",{attrs:{header:""}},[e._v("Take Picture")]),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.onTakePicture}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"school"}})],1),s("q-item-section",[s("q-item-label",[e._v("Take Picture")])],1)],1)],1),s("q-list",[s("q-item-label",{attrs:{header:""}},[e._v("LogOut")]),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.onLogout}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"school"}})],1),s("q-item-section",[s("q-item-label",[e._v("Logout")])],1)],1)],1)],1)])],1),s("q-dialog",{attrs:{persistent:"",maximized:!0},model:{value:e.dlgBuilding.show,callback:function(t){e.$set(e.dlgBuilding,"show",t)},expression:"dlgBuilding.show"}},[s("q-card",[s("q-toolbar",{staticClass:"bg-primary"},[s("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"location_searching"},on:{click:e.locateBuilding}}),s("q-toolbar-title",[e._v(e._s(e.dlgBuilding.title))]),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1),s("q-form",[s("q-input",{attrs:{label:"Street No."},scopedSlots:e._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"location_city"}})]},proxy:!0}]),model:{value:e.dlgBuilding.streetNumber,callback:function(t){e.$set(e.dlgBuilding,"streetNumber",t)},expression:"dlgBuilding.streetNumber"}}),s("q-input",{attrs:{label:"Street Name"},scopedSlots:e._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"place"}})]},proxy:!0}]),model:{value:e.dlgBuilding.streetName,callback:function(t){e.$set(e.dlgBuilding,"streetName",t)},expression:"dlgBuilding.streetName"}}),s("q-btn",{staticClass:"full-width",attrs:{label:"Search",color:"primary",icon:"search"},on:{click:e.onSearchBuilding}})],1),s("q-list",{attrs:{bordered:"",separator:""}},e._l(e.dlgBuilding.builingList,(function(t){return s("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],key:t.BuildingID,attrs:{clickable:"",dense:""},on:{click:function(s){return e.onConnectBuilding(t.BuildingID)}}},[s("q-item-section",[s("q-item-label",[e._v(e._s(t.Address))])],1)],1)})),1)],1)],1),s("q-page-container",[s("q-page",[s("q-virtual-scroll",{ref:"scroll",staticStyle:{"max-height":"90vh"},attrs:{items:e.session.list,separator:""},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item,a=t.index;return[s("q-item",{key:a,attrs:{dense:""}},[s("q-item-section",[s("q-item-label",[e._v("#"+e._s(a)+" - "+e._s(i.Response))])],1)],1)]}}])})],1)],1)],1)},a=[],n=s("2c75");class o{static GetResponse(e,t,s){const i={SessionId:e,LogSource:t,Begin:s};return n["a"].post("GetResponse",i)}}class r{static ConnectSiteServer(e,t){const s={SiteServerPK:e,IsPublic:t};return n["a"].post("ConnectSiteServer",s)}static GetBuilding(e){const t={BuildingID:e};return n["a"].post("GetBuilding",t)}static GetBuildingByGPS(e,t){const s={Latitude:e,Longitude:t};return n["a"].post("GetBuildingByGPS",s)}static GetBuildingList(e,t){const s={StreetNumb:e,StreetNameStartWith:t};return n["a"].post("GetBuildingList",s)}static GetSiteTimezone(e,t){const s={SiteServerPK:e,SessionId:t};return n["a"].post("GetSiteTimezone",s)}static MaskSiteAsDebug(e,t,s){const i={SiteServerPK:e,SessionId:t,IsDebug:s};return n["a"].post("MaskSiteAsDebug",i)}static ReportSiteCurrentTime(e,t){const s={SiteServerPK:e,SessionId:t};return n["a"].post("ReportSiteCurrentTime",s)}static ReportSiteSerialNumber(e,t){const s={SiteServerPK:e,SessionId:t};return n["a"].post("ReportSiteSerialNumber",s)}static RestartSiteService(e,t,s){const i={SiteServerPK:e,SessionId:t,Service:s};return n["a"].post("RestartSiteService",i)}static SetSiteTimezone(e,t,s){const i={SiteServerPK:e,SessionId:t,TimezoneID:s};return n["a"].post("SetSiteTimezone",i)}static StartSiteService(e,t,s){const i={SiteServerPK:e,SessionId:t,Service:s};return n["a"].post("StartSiteService",i)}static StopSiteService(e,t,s){const i={SiteServerPK:e,SessionId:t,Service:s};return n["a"].post("StopSiteService",i)}static ViewSiteService(e,t){const s={SiteServerPK:e,SessionId:t};return n["a"].post("ViewSiteService",s)}}class l{static ConnectSitePanel(e,t){const s={SitePanelPK:e,IsPublic:t};return n["a"].post("ConnectSitePanel",s)}static GetInputList(e){const t={UnitID:e};return n["a"].post("GetInputList",t)}static GetMainZoneList(e){const t={UnitID:e};return n["a"].post("GetMainZoneList",t)}static GetPanelAccessLevel(e,t){const s={SitePanelPK:e,SessionId:t};return n["a"].post("GetPanelAccessLevel",s)}static GetPanelAMFormat(e,t){const s={SitePanelPK:e,SessionId:t};return n["a"].post("GetPanelAMFormat",s)}static GetPanelAnalogAuxiliaryStatus(e,t){const s={SitePanelPK:e,SessionId:t};return n["a"].post("GetPanelAnalogAuxiliaryStatus",s)}static GetPanelAnalogPrimaryStatus(e,t){const s={SitePanelPK:e,SessionId:t};return n["a"].post("GetPanelAnalogPrimaryStatus",s)}static GetPanelAuxInput(e,t){const s={SitePanelPK:e,SessionId:t};return n["a"].post("GetPanelAuxInput",s)}static GetPanelAuxInputStatus(e,t){const s={SitePanelPK:e,SessionId:t};return n["a"].post("GetPanelAuxInputStatus",s)}static GetPanelAuxOutput(e,t){const s={SitePanelPK:e,SessionId:t};return n["a"].post("GetPanelAuxOutput",s)}static GetPanelCardFormat(e,t){const s={SitePanelPK:e,SessionId:t};return n["a"].post("GetPanelCardFormat",s)}static GetPanelCardHolder(e,t){const s={SitePanelPK:e,SessionId:t};return n["a"].post("GetPanelCardHolder",s)}static GetPanelDateTime(e,t){const s={SitePanelPK:e,SessionId:t};return n["a"].post("GetPanelDateTime",s)}static GetPanelHoliday(e,t){const s={SitePanelPK:e,SessionId:t};return n["a"].post("GetPanelHoliday",s)}static GetPanelInputGroup(e,t){const s={SitePanelPK:e,SessionId:t};return n["a"].post("GetPanelInputGroup",s)}static GetPanelInterval(e,t){const s={SitePanelPK:e,SessionId:t};return n["a"].post("GetPanelInterval",s)}static GetPanelOutputGroup(e,t){const s={SitePanelPK:e,SessionId:t};return n["a"].post("GetPanelOutputGroup",s)}static GetPanelOutputStatus(e,t){const s={SitePanelPK:e,SessionId:t};return n["a"].post("GetPanelOutputStatus",s)}static GetPanelPrimaryStatus(e,t){const s={SitePanelPK:e,SessionId:t};return n["a"].post("GetPanelPrimaryStatus",s)}static GetPanelPrimaryZone(e,t){const s={SitePanelPK:e,SessionId:t};return n["a"].post("GetPanelPrimaryZone",s)}static GetPanelSerialNumber(e,t){const s={SitePanelPK:e,SessionId:t};return n["a"].post("GetPanelSerialNumber",s)}static GetPanelSupervisory(e,t){const s={SitePanelPK:e,SessionId:t};return n["a"].post("GetPanelSupervisory",s)}static GetPanelSupervisoryStatus(e,t){const s={SitePanelPK:e,SessionId:t};return n["a"].post("GetPanelSupervisoryStatus",s)}static GetPanelSystemModuleStatus(e,t){const s={SitePanelPK:e,SessionId:t};return n["a"].post("GetPanelSystemModuleStatus",s)}static GetPanelTempSchedule(e,t){const s={SitePanelPK:e,SessionId:t};return n["a"].post("GetPanelTempSchedule",s)}static GetPanelTimeCode(e,t){const s={SitePanelPK:e,SessionId:t};return n["a"].post("GetPanelTimeCode",s)}static MaskPanelAsDebug(e,t,s){const i={SitePanelPK:e,SessionId:t,IsDebug:s};return n["a"].post("MaskPanelAsDebug",i)}static PanelDeEnergize(e,t,s){const i={SitePanelPK:e,SessionId:t,PanelZoneID:s};return n["a"].post("PanelDeEnergize",i)}static PanelEnergize(e,t,s){const i={SitePanelPK:e,SessionId:t,PanelZoneID:s};return n["a"].post("PanelEnergize",i)}static PanelLockPulse(e,t,s){const i={SitePanelPK:e,SessionId:t,Value:s};return n["a"].post("PanelLockPulse",i)}static PanelModeBlackCard(e,t){const s={SitePanelPK:e,SessionId:t};return n["a"].post("PanelModeBlackCard",s)}static PanelModeGreenCard(e,t){const s={SitePanelPK:e,SessionId:t};return n["a"].post("PanelModeGreenCard",s)}static PanelModeRedCard(e,t){const s={SitePanelPK:e,SessionId:t};return n["a"].post("PanelModeRedCard",s)}static PanelOverrideRestoreAuxiliaryInput(e,t,s){const i={SitePanelPK:e,SessionId:t,Value:s};return n["a"].post("PanelOverrideRestoreAuxiliaryInput",i)}static PanelOverrideRestoreMainZone(e,t,s){const i={SitePanelPK:e,SessionId:t,Value:s};return n["a"].post("PanelOverrideRestoreMainZone",i)}static PanelOverrideSetAuxiliaryInput(e,t,s){const i={SitePanelPK:e,SessionId:t,Value:s};return n["a"].post("PanelOverrideSetAuxiliaryInput",i)}static PanelOverrideSetMain(e,t,s){const i={SitePanelPK:e,SessionId:t,Value:s};return n["a"].post("PanelOverrideSetMain",i)}static PanelSearchAccessLevel(e,t,s){const i={SitePanelPK:e,SessionId:t,Value:s};return n["a"].post("PanelSearchAccessLevel",i)}static PanelSearchAMFormat(e,t,s){const i={SitePanelPK:e,SessionId:t,Value:s};return n["a"].post("PanelSearchAMFormat",i)}static PanelSearchCardKey(e,t,s){const i={SitePanelPK:e,SessionId:t,Value:s};return n["a"].post("PanelSearchCardKey",i)}static PanelSearchInterval(e,t,s){const i={SitePanelPK:e,SessionId:t,Value:s};return n["a"].post("PanelSearchInterval",i)}static PanelSearchTimeCode(e,t,s){const i={SitePanelPK:e,SessionId:t,Value:s};return n["a"].post("PanelSearchTimeCode",i)}static PanelSirenDeEnergize(e,t,s){const i={SitePanelPK:e,SessionId:t,PanelZoneID:s};return n["a"].post("PanelSirenDeEnergize",i)}static PanelSirenEnergize(e,t,s){const i={SitePanelPK:e,SessionId:t,PanelZoneID:s};return n["a"].post("PanelSirenEnergize",i)}static PullPanelChanges(e,t){const s={SitePanelPK:e,SessionId:t};return n["a"].post("PullPanelChanges",s)}static RebootPanel(e,t){const s={SitePanelPK:e,SessionId:t};return n["a"].post("RebootPanel",s)}}var c=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-list",[s("q-item-label",{attrs:{header:""}},[e._v("Panel Command List")]),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.onPanelTime}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"school"}})],1),s("q-item-section",[s("q-item-label",[e._v("Report Time")])],1)],1),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.onPanelSN}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"school"}})],1),s("q-item-section",[s("q-item-label",[e._v("Report S/N")])],1)],1),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"disabled",attrs:{clickable:""},on:{click:e.onPanelReboot}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"school"}})],1),s("q-item-section",[s("q-item-label",[e._v("Reboot Panel")])],1)],1),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.onPanelPullChanges}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"school"}})],1),s("q-item-section",[s("q-item-label",[e._v("Pull Changes")])],1)],1),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.onPanelHoliday}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"school"}})],1),s("q-item-section",[s("q-item-label",[e._v("Holiday")])],1)],1),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.onPanelTimeCode}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"school"}})],1),s("q-item-section",[s("q-item-label",[e._v("TimeCode")])],1)],1),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.onPanelInterval}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"school"}})],1),s("q-item-section",[s("q-item-label",[e._v("Interval")])],1)],1),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.onPanelAMFormat}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"school"}})],1),s("q-item-section",[s("q-item-label",[e._v("AMFormat")])],1)],1),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.onPanelAccessLevel}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"school"}})],1),s("q-item-section",[s("q-item-label",[e._v("AccessLevel")])],1)],1),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.onPanelCardFormat}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"school"}})],1),s("q-item-section",[s("q-item-label",[e._v("Card Format")])],1)],1),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.onPanelCardHolder}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"school"}})],1),s("q-item-section",[s("q-item-label",[e._v("Card Holder")])],1)],1),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.onPanelPrimaryZone}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"school"}})],1),s("q-item-section",[s("q-item-label",[e._v("Primary Zone")])],1)],1),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.onPanelAuxOutput}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"school"}})],1),s("q-item-section",[s("q-item-label",[e._v("AuxOutput")])],1)],1),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.onPanelAuxInput}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"school"}})],1),s("q-item-section",[s("q-item-label",[e._v("AuxInput")])],1)],1),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.onPanelSupervisory}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"school"}})],1),s("q-item-section",[s("q-item-label",[e._v("Supervisory")])],1)],1),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.onPanelOutputGroup}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"school"}})],1),s("q-item-section",[s("q-item-label",[e._v("OutputGroup")])],1)],1),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.onPanelInputGroup}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"school"}})],1),s("q-item-section",[s("q-item-label",[e._v("InputGroup")])],1)],1),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.onPanelAnalogPrimaryStatus}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"school"}})],1),s("q-item-section",[s("q-item-label",[e._v("AnalogPrimaryStatus")])],1)],1),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.onPanelAnalogAuxiliaryStatus}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"school"}})],1),s("q-item-section",[s("q-item-label",[e._v("AnalogAuxiliaryStatus")])],1)],1),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.onPanelPrimaryStatus}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"school"}})],1),s("q-item-section",[s("q-item-label",[e._v("PrimaryStatus")])],1)],1),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.onPanelAuxInputStatus}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"school"}})],1),s("q-item-section",[s("q-item-label",[e._v("AuxInputStatus")])],1)],1),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.onPanelSupervisoryStatus}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"school"}})],1),s("q-item-section",[s("q-item-label",[e._v("SupervisoryStatus")])],1)],1),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.onPanelOutputStatus}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"school"}})],1),s("q-item-section",[s("q-item-label",[e._v("OutputStatus")])],1)],1),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.onPanelSystemModuleStatus}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"school"}})],1),s("q-item-section",[s("q-item-label",[e._v("SystemModuleStatus")])],1)],1),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.onPanelSearchInterval}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"school"}})],1),s("q-item-section",[s("q-item-label",[e._v("SearchInterval")])],1)],1),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.onPanelSearchTimeCode}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"school"}})],1),s("q-item-section",[s("q-item-label",[e._v("SearchTimeCode")])],1)],1),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.onPanelSearchAccessLevel}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"school"}})],1),s("q-item-section",[s("q-item-label",[e._v("SearchAccessLevel")])],1)],1),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.onPanelSearchAMFormat}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"school"}})],1),s("q-item-section",[s("q-item-label",[e._v("SearchAMFormat")])],1)],1),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.onPanelSearchCardKey}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"school"}})],1),s("q-item-section",[s("q-item-label",[e._v("SearchCardKey")])],1)],1),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.onPanelOverrideSetMain}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"school"}})],1),s("q-item-section",[s("q-item-label",[e._v("OverrideSetMain")])],1)],1),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.onPanelOverrideRestoreMainZone}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"school"}})],1),s("q-item-section",[s("q-item-label",[e._v("OverrideRestoreMainZone")])],1)],1),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.onPanelLockPulse}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"school"}})],1),s("q-item-section",[s("q-item-label",[e._v("LockPulse")])],1)],1),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.onPanelOverrideSetAuxiliaryInput}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"school"}})],1),s("q-item-section",[s("q-item-label",[e._v("OverrideSetAuxiliaryInput")])],1)],1),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.onPanelOverrideRestoreAuxiliaryInput}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"school"}})],1),s("q-item-section",[s("q-item-label",[e._v("OverrideRestoreAuxiliaryInput")])],1)],1),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.onPanelSirenEnergize}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"school"}})],1),s("q-item-section",[s("q-item-label",[e._v("SirenEnergize")])],1)],1),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.onPanelSirenDeEnergize}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"school"}})],1),s("q-item-section",[s("q-item-label",[e._v("SirenDeEnergize")])],1)],1),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.onPanelEnergize}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"school"}})],1),s("q-item-section",[s("q-item-label",[e._v("Energize")])],1)],1),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.onPanelDeEnergize}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"school"}})],1),s("q-item-section",[s("q-item-label",[e._v("DeEnergize")])],1)],1),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.onPanelModeRedCard}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"school"}})],1),s("q-item-section",[s("q-item-label",[e._v("ModeRedCard")])],1)],1),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.onPanelModeBlackCard}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"school"}})],1),s("q-item-section",[s("q-item-label",[e._v("ModeBlackCard")])],1)],1),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.onPanelModeGreenCard}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"school"}})],1),s("q-item-section",[s("q-item-label",[e._v("ModeGreenCard")])],1)],1)],1)},h=[],d=s("2b0e"),u=function(e,t,s,i){function a(e){return e instanceof s?e:new s((function(t){t(e)}))}return new(s||(s=Promise))((function(s,n){function o(e){try{l(i.next(e))}catch(t){n(t)}}function r(e){try{l(i["throw"](e))}catch(t){n(t)}}function l(e){e.done?s(e.value):a(e.value).then(o,r)}l((i=i.apply(e,t||[])).next())}))},m=d["a"].extend({name:"PanelCommand",props:{sessionPK:{type:String,required:!0},sessionId:{type:String,required:!0},unitId:{type:Number,required:!0}},data(){return{zoneList:new Array,inputList:new Array}},methods:{beforeInvoke(){this.$emit("before-click"),this.$q.loading.show()},afterSuccess(e){this.$q.loading.hide(),e.OK?this.$q.notify({message:e.Message,color:"green",timeout:2e3}):this.$q.notify({message:e.Message,color:"purple",timeout:2e3})},afterError(e){this.$q.loading.hide(),this.$q.notify({message:e,color:"red",timeout:2e3})},onPanelTime(){this.beforeInvoke(),l.GetPanelDateTime(this.sessionPK,this.sessionId).then(e=>{this.afterSuccess(e.data)}).catch(e=>{this.afterError(e.message)})},onPanelSN(){this.beforeInvoke(),l.GetPanelSerialNumber(this.sessionPK,this.sessionId).then(e=>{this.afterSuccess(e.data)}).catch(e=>{this.afterError(e.message)})},onPanelReboot(){this.beforeInvoke(),l.RebootPanel(this.sessionPK,this.sessionId).then(e=>{this.afterSuccess(e.data)}).catch(e=>{this.afterError(e.message)})},onPanelPullChanges(){this.beforeInvoke(),l.PullPanelChanges(this.sessionPK,this.sessionId).then(e=>{this.afterSuccess(e.data)}).catch(e=>{this.afterError(e.message)})},onPanelHoliday(){this.beforeInvoke(),l.GetPanelHoliday(this.sessionPK,this.sessionId).then(e=>{this.afterSuccess(e.data)}).catch(e=>{this.afterError(e.message)})},onPanelInterval(){this.beforeInvoke(),l.GetPanelInterval(this.sessionPK,this.sessionId).then(e=>{this.afterSuccess(e.data)}).catch(e=>{this.afterError(e.message)})},onPanelTimeCode(){this.beforeInvoke(),l.GetPanelTimeCode(this.sessionPK,this.sessionId).then(e=>{this.afterSuccess(e.data)}).catch(e=>{this.afterError(e.message)})},onPanelAMFormat(){this.beforeInvoke(),l.GetPanelAMFormat(this.sessionPK,this.sessionId).then(e=>{this.afterSuccess(e.data)}).catch(e=>{this.afterError(e.message)})},onPanelAccessLevel(){this.beforeInvoke(),l.GetPanelAccessLevel(this.sessionPK,this.sessionId).then(e=>{this.afterSuccess(e.data)}).catch(e=>{this.afterError(e.message)})},onPanelCardFormat(){this.beforeInvoke(),l.GetPanelCardFormat(this.sessionPK,this.sessionId).then(e=>{this.afterSuccess(e.data)}).catch(e=>{this.afterError(e.message)})},onPanelCardHolder(){this.beforeInvoke(),l.GetPanelCardHolder(this.sessionPK,this.sessionId).then(e=>{this.afterSuccess(e.data)}).catch(e=>{this.afterError(e.message)})},onPanelPrimaryZone(){this.beforeInvoke(),l.GetPanelPrimaryZone(this.sessionPK,this.sessionId).then(e=>{this.afterSuccess(e.data)}).catch(e=>{this.afterError(e.message)})},onPanelAuxOutput(){this.beforeInvoke(),l.GetPanelAuxOutput(this.sessionPK,this.sessionId).then(e=>{this.afterSuccess(e.data)}).catch(e=>{this.afterError(e.message)})},onPanelAuxInput(){this.beforeInvoke(),l.GetPanelAuxInput(this.sessionPK,this.sessionId).then(e=>{this.afterSuccess(e.data)}).catch(e=>{this.afterError(e.message)})},onPanelSupervisory(){this.beforeInvoke(),l.GetPanelSupervisory(this.sessionPK,this.sessionId).then(e=>{this.afterSuccess(e.data)}).catch(e=>{this.afterError(e.message)})},onPanelOutputGroup(){this.beforeInvoke(),l.GetPanelOutputGroup(this.sessionPK,this.sessionId).then(e=>{this.afterSuccess(e.data)}).catch(e=>{this.afterError(e.message)})},onPanelInputGroup(){this.beforeInvoke(),l.GetPanelInputGroup(this.sessionPK,this.sessionId).then(e=>{this.afterSuccess(e.data)}).catch(e=>{this.afterError(e.message)})},onPanelAnalogPrimaryStatus(){this.beforeInvoke(),l.GetPanelAnalogPrimaryStatus(this.sessionPK,this.sessionId).then(e=>{this.afterSuccess(e.data)}).catch(e=>{this.afterError(e.message)})},onPanelAnalogAuxiliaryStatus(){this.beforeInvoke(),l.GetPanelAnalogAuxiliaryStatus(this.sessionPK,this.sessionId).then(e=>{this.afterSuccess(e.data)}).catch(e=>{this.afterError(e.message)})},onPanelPrimaryStatus(){this.beforeInvoke(),l.GetPanelPrimaryStatus(this.sessionPK,this.sessionId).then(e=>{this.afterSuccess(e.data)}).catch(e=>{this.afterError(e.message)})},onPanelAuxInputStatus(){this.beforeInvoke(),l.GetPanelAuxInputStatus(this.sessionPK,this.sessionId).then(e=>{this.afterSuccess(e.data)}).catch(e=>{this.afterError(e.message)})},onPanelSupervisoryStatus(){this.beforeInvoke(),l.GetPanelSupervisoryStatus(this.sessionPK,this.sessionId).then(e=>{this.afterSuccess(e.data)}).catch(e=>{this.afterError(e.message)})},onPanelOutputStatus(){this.beforeInvoke(),l.GetPanelOutputStatus(this.sessionPK,this.sessionId).then(e=>{this.afterSuccess(e.data)}).catch(e=>{this.afterError(e.message)})},onPanelSystemModuleStatus(){this.beforeInvoke(),l.GetPanelSystemModuleStatus(this.sessionPK,this.sessionId).then(e=>{this.afterSuccess(e.data)}).catch(e=>{this.afterError(e.message)})},onPanelSearchInterval(){this.$q.dialog({title:"Interval Searching",message:"Enter value (1;2;)",prompt:{model:"",type:"text"},cancel:!0,persistent:!0}).onOk(e=>{e&&(this.beforeInvoke(),l.PanelSearchInterval(this.sessionPK,this.sessionId,e).then(e=>{this.afterSuccess(e.data)}).catch(e=>{this.afterError(e.message)}))})},onPanelSearchTimeCode(){this.$q.dialog({title:"Time Code Searching",message:"Enter value (1;2;)",prompt:{model:"",type:"text"},cancel:!0,persistent:!0}).onOk(e=>{e&&(this.beforeInvoke(),l.PanelSearchTimeCode(this.sessionPK,this.sessionId,e).then(e=>{this.afterSuccess(e.data)}).catch(e=>{this.afterError(e.message)}))})},onPanelSearchAccessLevel(){this.$q.dialog({title:"Access Level Searching",message:"Enter value (1;2;)",prompt:{model:"",type:"text"},cancel:!0,persistent:!0}).onOk(e=>{e&&(this.beforeInvoke(),l.PanelSearchAccessLevel(this.sessionPK,this.sessionId,e).then(e=>{this.afterSuccess(e.data)}).catch(e=>{this.afterError(e.message)}))})},onPanelSearchAMFormat(){this.$q.dialog({title:"A/M Format Searching",message:"Enter value (1;2;)",prompt:{model:"",type:"text"},cancel:!0,persistent:!0}).onOk(e=>{e&&(this.beforeInvoke(),l.PanelSearchAMFormat(this.sessionPK,this.sessionId,e).then(e=>{this.afterSuccess(e.data)}).catch(e=>{this.afterError(e.message)}))})},onPanelSearchCardKey(){this.$q.dialog({title:"Card/Key Searching",message:"Enter value (1;2;)",prompt:{model:"",type:"text"},cancel:!0,persistent:!0}).onOk(e=>{e&&(this.beforeInvoke(),l.PanelSearchCardKey(this.sessionPK,this.sessionId,e).then(e=>{this.afterSuccess(e.data)}).catch(e=>{this.afterError(e.message)}))})},onPanelOverrideSetMain(){return u(this,void 0,void 0,(function*(){yield this.getZoneList();let e=[];for(let t of this.zoneList)t.IsLock&&e.push({label:t.Description,value:t.PanelZoneID});0!=e.length?this.$q.dialog({title:"Lock zones",message:"Choose your options",options:{type:"checkbox",model:[],items:e},cancel:!0,persistent:!0}).onOk(e=>{e.length>0&&(this.beforeInvoke(),l.PanelOverrideSetMain(this.sessionPK,this.sessionId,e.join(";")).then(e=>{this.afterSuccess(e.data)}).catch(e=>{this.afterError(e.message)}))}):this.$q.dialog({title:"Error",message:"Lock zone does not exist."})}))},onPanelOverrideRestoreMainZone(){return u(this,void 0,void 0,(function*(){yield this.getZoneList();let e=[];for(let t of this.zoneList)t.IsLock&&e.push({label:t.Description,value:t.PanelZoneID});0!=e.length?this.$q.dialog({title:"Lock zones",message:"Choose your options",options:{type:"checkbox",model:[],items:e},cancel:!0,persistent:!0}).onOk(e=>{e.length>0&&(this.beforeInvoke(),l.PanelOverrideRestoreMainZone(this.sessionPK,this.sessionId,e.join(";")).then(e=>{this.afterSuccess(e.data)}).catch(e=>{this.afterError(e.message)}))}):this.$q.dialog({title:"Error",message:"Lock zone does not exist."})}))},onPanelLockPulse(){return u(this,void 0,void 0,(function*(){yield this.getZoneList();let e=[];for(let t of this.zoneList)t.IsLock&&e.push({label:t.Description,value:t.PanelZoneID});0!=e.length?this.$q.dialog({title:"Lock zones",message:"Choose your options",options:{type:"checkbox",model:[],items:e},cancel:!0,persistent:!0}).onOk(e=>{e.length>0&&(this.beforeInvoke(),l.PanelLockPulse(this.sessionPK,this.sessionId,e.join(";")).then(e=>{this.afterSuccess(e.data)}).catch(e=>{this.afterError(e.message)}))}):this.$q.dialog({title:"Error",message:"Lock zone does not exist."})}))},onPanelOverrideSetAuxiliaryInput(){return u(this,void 0,void 0,(function*(){yield this.getInputList();let e=[];for(let t of this.inputList)e.push({label:t.Description,value:t.PanelZoneID});0!=e.length?this.$q.dialog({title:"Auxiliary inputs",message:"Choose your options",options:{type:"checkbox",model:[],items:e},cancel:!0,persistent:!0}).onOk(e=>{e.length>0&&(this.beforeInvoke(),l.PanelOverrideSetAuxiliaryInput(this.sessionPK,this.sessionId,e.join(";")).then(e=>{this.afterSuccess(e.data)}).catch(e=>{this.afterError(e.message)}))}):this.$q.dialog({title:"Error",message:"Auxiliary input does not exist."})}))},onPanelOverrideRestoreAuxiliaryInput(){return u(this,void 0,void 0,(function*(){yield this.getInputList();let e=[];for(let t of this.inputList)e.push({label:t.Description,value:t.PanelZoneID});0!=e.length?this.$q.dialog({title:"Auxiliary inputs",message:"Choose your options",options:{type:"checkbox",model:[],items:e},cancel:!0,persistent:!0}).onOk(e=>{e.length>0&&(this.beforeInvoke(),l.PanelOverrideRestoreAuxiliaryInput(this.sessionPK,this.sessionId,e.join(";")).then(e=>{this.afterSuccess(e.data)}).catch(e=>{this.afterError(e.message)}))}):this.$q.dialog({title:"Error",message:"Auxiliary input does not exist."})}))},onPanelSirenEnergize(){return u(this,void 0,void 0,(function*(){yield this.getZoneList();let e=[];for(let t of this.zoneList)t.IsSiren&&e.push({label:t.Description,value:t.PanelZoneID});0!=e.length?this.$q.dialog({title:"Siren zones",message:"Choose your options",options:{type:"checkbox",model:[],items:e},cancel:!0,persistent:!0}).onOk(e=>{e.length>0&&(this.beforeInvoke(),l.PanelSirenEnergize(this.sessionPK,this.sessionId,e.join(";")).then(e=>{this.afterSuccess(e.data)}).catch(e=>{this.afterError(e.message)}))}):this.$q.dialog({title:"Error",message:"Siren zone does not exist."})}))},onPanelSirenDeEnergize(){return u(this,void 0,void 0,(function*(){yield this.getZoneList();let e=[];for(let t of this.zoneList)t.IsSiren&&e.push({label:t.Description,value:t.PanelZoneID});0!=e.length?this.$q.dialog({title:"Siren zones",message:"Choose your options",options:{type:"checkbox",model:[],items:e},cancel:!0,persistent:!0}).onOk(e=>{e.length>0&&(this.beforeInvoke(),l.PanelSirenDeEnergize(this.sessionPK,this.sessionId,e.join(";")).then(e=>{this.afterSuccess(e.data)}).catch(e=>{this.afterError(e.message)}))}):this.$q.dialog({title:"Error",message:"Siren zone does not exist."})}))},onPanelEnergize(){return u(this,void 0,void 0,(function*(){yield this.getZoneList();let e=[];for(let t of this.zoneList)t.IsPiezo&&e.push({label:t.Description,value:t.PanelZoneID});0!=e.length?this.$q.dialog({title:"Piezo zones",message:"Choose your options",options:{type:"checkbox",model:[],items:e},cancel:!0,persistent:!0}).onOk(e=>{e.length>0&&(this.beforeInvoke(),l.PanelEnergize(this.sessionPK,this.sessionId,e.join(";")).then(e=>{this.afterSuccess(e.data)}).catch(e=>{this.afterError(e.message)}))}):this.$q.dialog({title:"Error",message:"Piezo zone does not exist."})}))},onPanelDeEnergize(){return u(this,void 0,void 0,(function*(){yield this.getZoneList();let e=[];for(let t of this.zoneList)t.IsPiezo&&e.push({label:t.Description,value:t.PanelZoneID});0!=e.length?this.$q.dialog({title:"Piezo zones",message:"Choose your options",options:{type:"checkbox",model:[],items:e},cancel:!0,persistent:!0}).onOk(e=>{e.length>0&&(this.beforeInvoke(),l.PanelDeEnergize(this.sessionPK,this.sessionId,e.join(";")).then(e=>{this.afterSuccess(e.data)}).catch(e=>{this.afterError(e.message)}))}):this.$q.dialog({title:"Error",message:"Piezo zone does not exist."})}))},onPanelModeRedCard(){this.beforeInvoke(),l.PanelModeRedCard(this.sessionPK,this.sessionId).then(e=>{this.afterSuccess(e.data)}).catch(e=>{this.afterError(e.message)})},onPanelModeBlackCard(){this.beforeInvoke(),l.PanelModeBlackCard(this.sessionPK,this.sessionId).then(e=>{this.afterSuccess(e.data)}).catch(e=>{this.afterError(e.message)})},onPanelModeGreenCard(){this.beforeInvoke(),l.PanelModeGreenCard(this.sessionPK,this.sessionId).then(e=>{this.afterSuccess(e.data)}).catch(e=>{this.afterError(e.message)})},getZoneList(){return u(this,void 0,void 0,(function*(){this.zoneList.length>0||(this.$q.loading.show(),yield l.GetMainZoneList(this.unitId).then(e=>{for(let t of e.data.List)this.zoneList.push(t);this.$q.loading.hide()}).catch(e=>{this.$q.loading.hide(),this.$q.notify(e.message)}))}))},getInputList(){return u(this,void 0,void 0,(function*(){this.inputList.length>0||(this.$q.loading.show(),yield l.GetInputList(this.unitId).then(e=>{for(let t of e.data.List)this.inputList.push(t);this.$q.loading.hide()}).catch(e=>{this.$q.loading.hide(),this.$q.notify(e.message)}))}))}}}),p=m,P=s("2877"),v=Object(P["a"])(p,c,h,!1,null,null,null),S=v.exports,g=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-list",[s("q-item-label",{attrs:{header:""}},[e._v("Site Command List")]),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.onSiteTime}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"school"}})],1),s("q-item-section",[s("q-item-label",[e._v("Report Time")])],1)],1),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.onSiteSN}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"school"}})],1),s("q-item-section",[s("q-item-label",[e._v("Report S/N")])],1)],1)],1)},q=[],f=d["a"].extend({name:"SiteCommand",props:{sessionPK:{type:String,required:!0},sessionId:{type:String,default:"",required:!0}},methods:{beforeInvoke(){this.$emit("before-click"),this.$q.loading.show()},afterSuccess(e){this.$q.loading.hide(),e.OK?this.$q.notify({message:e.Message,color:"green",timeout:2e3}):this.$q.notify({message:e.Message,color:"purple",timeout:2e3})},afterError(e){this.$q.loading.hide(),this.$q.notify({message:e,color:"red",timeout:2e3})},onSiteTime(){this.beforeInvoke(),r.ReportSiteCurrentTime(this.sessionPK,this.sessionId).then(e=>{this.afterSuccess(e.data)}).catch(e=>{this.afterError(e.message)})},onSiteSN(){this.beforeInvoke(),r.ReportSiteSerialNumber(this.sessionPK,this.sessionId).then(e=>{this.afterSuccess(e.data)}).catch(e=>{this.afterError(e.message)})}}}),b=f,I=Object(P["a"])(b,g,q,!1,null,null,null),k=I.exports,y=function(e,t,s,i){function a(e){return e instanceof s?e:new s((function(t){t(e)}))}return new(s||(s=Promise))((function(s,n){function o(e){try{l(i.next(e))}catch(t){n(t)}}function r(e){try{l(i["throw"](e))}catch(t){n(t)}}function l(e){e.done?s(e.value):a(e.value).then(o,r)}l((i=i.apply(e,t||[])).next())}))},K=d["a"].extend({name:"Index",components:{"c-panel-command":S,"c-site-command":k},data(){return{leftDrawerOpen:!1,title:"",building:{address:"",timeZoneId:"",siteServerMap:new Map,sitePanelMap:new Map},session:{sitePK:"",panelPK:"",unitId:0,id:"",now:"",debug:"",list:new Array},timeout:{timeoutId:0,stopTimeout:!1},dlgBuilding:{show:!0,title:"Building Search",streetNumber:"",streetName:"",builingList:new Array}}},methods:{onBeforeClick(){if(this.$q.screen.lt.md){const e=this.$refs.drawer;e.hide()}},notifyError(e){this.$q.notify(e)},getResponse(){return y(this,void 0,void 0,(function*(){0!==this.session.id.length&&0!==this.session.now.length&&o.GetResponse(this.session.id,this.session.debug,this.session.now).then(e=>{if(e.data.OK){if(this.session.now=e.data.Now,e.data.Result.length>0){for(let s of e.data.Result)this.session.list.push({Response:s.Response});const t=this.$refs.scroll;t.scrollTo(this.session.list.length-1)}}else this.notifyError(e.data.Message)}).catch(e=>{this.notifyError(e.message)})}))},startResposeLoop(){this.timeout.stopTimeout=!1,this.runResposeLoop()},runResposeLoop(){this.timeout.timeoutId&&window.clearTimeout(this.timeout.timeoutId),this.timeout.stopTimeout||(this.timeout.timeoutId=window.setTimeout(()=>y(this,void 0,void 0,(function*(){yield this.getResponse(),this.runResposeLoop()})),1e3))},stopResposeLoop(){this.timeout.stopTimeout=!0,this.timeout.timeoutId&&clearTimeout(this.timeout.timeoutId),this.session.sitePK="",this.session.panelPK="",this.session.list=[]},onConnect(){let e=[];for(let t of this.building.siteServerMap.values())e.push({label:t.SerialNumber,icon:"computer",id:t.SiteServerPK,panel:!1});e.push({});for(let t of this.building.sitePanelMap.values())e.push({label:t.UnitID,icon:"devices",id:t.SitePanelPK,panel:!0});this.$q.bottomSheet({message:"connect site or panel",actions:e}).onOk(e=>{e.panel?this.connectPanel(e.id,!1):this.connectSite(e.id,!1)})},connectPanel(e,t){if(!this.building.sitePanelMap.has(e))return;let s=this.building.sitePanelMap.get(e);this.$q.loading.show(),this.stopResposeLoop(),l.ConnectSitePanel(e,t).then(e=>{this.$q.loading.hide(),e.data.OK&&s?(this.title="Connected to "+s.UnitID,this.session.sitePK="",this.session.panelPK=s.SitePanelPK,this.session.unitId=s.UnitID,this.session.id=e.data.SessionId,this.session.now=e.data.Now,e.data.InDebug?this.session.debug=s.UnitID.toString():this.session.debug="",this.startResposeLoop()):(this.$q.dialog({title:"Error",message:e.data.Message}),this.title=this.building.address)}).catch(e=>{this.$q.loading.hide(),this.$q.dialog({title:"Error",message:e.message}),this.title=this.building.address})},connectSite(e,t){if(!this.building.siteServerMap.has(e))return;let s=this.building.siteServerMap.get(e);this.$q.loading.show(),this.stopResposeLoop(),r.ConnectSiteServer(e,t).then(e=>{this.$q.loading.hide(),e.data.OK&&s?(this.title="Connected to "+s.SerialNumber,this.session.panelPK="",this.session.unitId=0,this.session.sitePK=s.SiteServerPK,this.session.id=e.data.SessionId,this.session.now=e.data.Now,e.data.InDebug?this.session.debug=s.SiteServerPK:this.session.debug="",this.startResposeLoop()):(this.$q.dialog({title:"Error",message:e.data.Message}),this.title=this.building.address)}).catch(e=>{this.$q.loading.hide(),this.$q.dialog({title:"Error",message:e.message}),this.title=this.building.address})},onSearchBuilding(){this.$q.loading.show();let e=this.dlgBuilding.streetNumber,t=this.dlgBuilding.streetName;r.GetBuildingList(e,t).then(e=>{if(this.$q.loading.hide(),e.data.OK){this.dlgBuilding.builingList=[];for(let t of e.data.List)this.dlgBuilding.builingList.push({BuildingID:t.BuildingID,Address:t.Address})}else this.$q.dialog({title:"Error",message:e.data.Message})}).catch(e=>{this.$q.loading.hide(),this.$q.dialog({title:"Error",message:e.message})})},onConnectBuilding(e){this.getBuilding(e)},getBuilding(e){this.$q.loading.show(),r.GetBuilding(e).then(e=>{if(this.$q.loading.hide(),e.data.OK){this.title=e.data.Address,this.building.address=e.data.Address,this.building.timeZoneId=e.data.TimeZoneId,this.building.siteServerMap.clear();for(let t of e.data.SiteServerList)this.building.siteServerMap.has(t.SiteServerPK)||this.building.siteServerMap.set(t.SiteServerPK,t);this.building.sitePanelMap.clear();for(let t of e.data.SitePanelList)this.building.sitePanelMap.has(t.SitePanelPK)||this.building.sitePanelMap.set(t.SitePanelPK,t);this.stopResposeLoop()}else this.$q.dialog({title:"Error",message:e.data.Message})}).catch(e=>{this.$q.loading.hide(),this.$q.dialog({title:"Error",message:e.message})})},onLogout(){sessionStorage.clear(),localStorage.clear(),this.$router.push({path:"/Login"})},onClearScreen(){if(this.session.list=[],this.$q.screen.lt.md){const e=this.$refs.drawer;e.hide()}},onTakePicture(){const e=window.navigator.camera;e&&e.getPicture(e=>{this.notifyError(e),this.$q.dialog({title:"OK",message:"OK"})},e=>{this.notifyError(e),this.$q.dialog({title:"Error",message:"Error"})},{quality:45,destinationType:0,sourceType:1,allowEdit:!0,encodingType:0,targetWidth:250,targetHeight:250})},locateBuilding(){navigator.geolocation.getCurrentPosition(e=>{this.dlgBuilding.title=`${this.formatDegree(e.coords.latitude)},  \n        ${this.formatDegree(e.coords.longitude)}`,this.$q.loading.show(),r.GetBuildingByGPS(e.coords.latitude,e.coords.longitude).then(e=>{if(this.$q.loading.hide(),e.data.OK){this.dlgBuilding.builingList=[];for(let t of e.data.List)this.dlgBuilding.builingList.push({BuildingID:t.BuildingID,Address:t.Address})}else this.$q.dialog({title:"Error",message:e.data.Message})}).catch(e=>{this.$q.loading.hide(),this.$q.dialog({title:"Error",message:e.message})})},e=>{this.notifyError(e.message)},{timeout:1e3})},formatDegree(e){let t=Math.abs(e),s=Math.floor(t),i=Math.floor(60*(t-s));var a=Math.round(3600*(t-s)%60);return e<0?`-${s}° ${i}' ${a}"`:`${s}° ${i}' ${a}"`}},mounted(){this.locateBuilding()},beforeDestroy(){this.stopResposeLoop()}}),w=K,G=Object(P["a"])(w,i,a,!1,null,null,null);t["default"]=G.exports}}]);